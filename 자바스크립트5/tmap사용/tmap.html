<html>
    <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>tMap</title>
            <script
                src="https://apis.openapi.sk.com/tmap/js?version=1&format=javascript&appKey=xqY2y0EhCs9wRwlSPyHVM6BaRU8Ggdzq7TAtkmaF"></script>
            <script src="jquery-3.6.4.min.js"></script>
            <!-- 현재 위치 찾는거임 근데 경도위도만 가져오는거 밖에 안됨 -->
            <script>
                if (navigator.geolocation) {
                    navigator
                        .geolocation
                        .getCurrentPosition(position => {
                            const {latitude, longitude} = position.coords;
                            const locationElement = document.getElementById("location");
                            locationElement.textContent = `현재 위치: 위도 ${latitude}, 경도 ${longitude}`;
                        });
                } else {
                    const locationElement = document.getElementById("location");
                    locationElement.textContent = "위치 정보를 지원하지 않는 브라우저입니다.";
                }

                //  위치 정보를 이용하여 지도에 마커 표시 또는 지도 중심 이동 등을 수행할 수 있습니다.
            </script>
            <!-- <p id="location">위치 정보를 불러오는 중...</p> -->
            <script>
                //페이지가 로딩이 된 후 호출하는 함수입니다
                let map;
                function initTmap() {
                    //map 생성, Tmap.map을 이용하여, 지도가들어갈 div, 넓이, 높이를 설정합니다.
                    map = new Tmap.Map({div: 'map_div', width: "100%", height: "100%"});
                    map.setCenter(
                        new Tmap.LonLat(127.11463442050498, 36.78590515451498).transform("EPSG:4326", "EPSG:3857"),
                        17
                    );

                    //map 클릭 이벤트 등록
                    map
                        .events
                        .register("click", map, onClick);
                    // map.setCenter(new Tmap.LonLat("126.986072",
                    // "37.570028").transform("EPSG:4326", "EPSG:3857"), 15); Tmap.Control를 사용하여 마우스
                    // 커서의 현재 위치가 가지는 좌표값을 맵 위에 표시해 주는 컨트롤을 추가해줍니다. 
                    map.addControls([     //마우스 커서의 현재
                    // 위치가 가지는 좌표값을 맵 위에 표시해 주는 컨트롤 좌표값을 WGS84GEO 좌표계의 값으로 표시해줍니다.     new
                    Tmap.Control.MousePosition({displayProjection: "EPSG:4326"}) ]);

                }

                //지도를 클릭했을때 발생하는 이벤트 함수입니다.
                function onClick(e) {
                    let lonlat = map
                        .getLonLatFromViewPortPx(e.xy)
                        .transform("EPSG:3857", "EPSG:4326"); //클릭한 부분의 ViewPorPx를 LonLat로 변환합니다
                    let result = '클릭한 위치 좌표는' + lonlat + '입니다.';
                    let resultDiv = document.getElementById("result");
                    resultDiv.innerHTML = result;
                }
                // initTmap()
            </script>
            <p id="result"></p>
            <!-- 위치관제 지도띄우기 step1 -->
            <script>

                // let markerList = [];
                // let beforeMarkerList = [];

                // map = new Tmapv2.Map("map_div", {
                //     center: new Tmapv2.LatLng(),
                //     width: "100%",
                //     height: "100%"
                // });
                // map.setZoom(15); 현재위치의 바로 이전위치를 그릴 레이어 생성 beforeMarkerLayer = new Tmap
                // .Layer     .Markers(); 현재위치를 그릴 레이어 생성 markerLayer = new Tmap     .Layer
                // .Markers(); 좌표 표시 Tmap.Control를 사용하여 마우스 커서의 현재 위치가 가지는 좌표값을 맵 위에 표시해 주는 컨트롤을
                // 추가해줍니다. map.addControls([     마우스 커서의 현재 위치가 가지는 좌표값을 맵 위에 표시해 주는 컨트롤 좌표값을
                // WGS84GEO 좌표계의 값으로 표시해줍니다.     new Tmap         .Control
                // .MousePosition({displayProjection: "EPSG:4326"}) ]); 지도의 중심점과 zoom레벨 설정
                // map.setCenter(     new Tmap.LonLat(126.98702028,
                // 37.56520450).transform("EPSG:4326", "EPSG:3857"), 17 ); 맵 생성 실행 initTmap();
            </script>

        </head>
        <body>
            <body onload="initTmap()">
                <div id="map_div"></div>

            </body>
        </html>